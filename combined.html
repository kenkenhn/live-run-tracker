<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Run Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
    h1 { text-align: center; }
    .stats { max-width: 400px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);}
    .stats div { margin: 10px 0; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>My Live Run Tracker</h1>
  <div class="stats">
    <div>Distance: <span id="distance">0.00 mi</span></div>
    <div>Current Pace: <span id="pace">0:00 min/mi</span></div>
    <div>ETA to 5 mi: <span id="eta">--:--</span></div>
  </div>

  <script>
    const TOTAL_GOAL_MILES = 5;

    function formatPace(minutesPerMile) {
      let min = Math.floor(minutesPerMile);
      let sec = Math.round((minutesPerMile - min) * 60);

      if (sec === 60) {
        min += 1;
        sec = 0;
      }

      return `${min}:${sec.toString().padStart(2, '0')} min/mi`;
    }

    async function updateStats() {
      // Example fetch from local token.json (for live site replace with actual Strava API fetch)
      const response = await fetch("token.json");
      const data = await response.json();

      // Simulated values (replace with live data parsing)
      let distanceMiles = data.distanceMiles || 2.5;  // replace with actual from your Strava JSON
      let elapsedMinutes = data.elapsedMinutes || 21; // replace with actual

      // Calculations
      let currentPace = elapsedMinutes / distanceMiles;
      let remainingDistance = TOTAL_GOAL_MILES - distanceMiles;
      let etaMinutes = currentPace * remainingDistance;

      // Update display
      document.getElementById("distance").textContent = `${distanceMiles.toFixed(2)} mi`;
      document.getElementById("pace").textContent = formatPace(currentPace);
      document.getElementById("eta").textContent = `${Math.floor(etaMinutes)}:${Math.round((etaMinutes % 1) * 60).toString().padStart(2,'0')}`;
    }

    updateStats();
    setInterval(updateStats, 30000); // refresh every 30 sec
  </script>
</body>
</html>
